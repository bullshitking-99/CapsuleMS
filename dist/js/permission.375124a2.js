(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["permission"],{"99af":function(e,t,o){"use strict";var n=o("23e7"),a=o("d039"),c=o("e8b5"),r=o("861d"),i=o("7b0b"),l=o("50c4"),d=o("8418"),u=o("65f0"),s=o("1dde"),f=o("b622"),b=o("2d00"),p=f("isConcatSpreadable"),m=9007199254740991,O="Maximum allowed index exceeded",h=b>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),j=s("concat"),V=function(e){if(!r(e))return!1;var t=e[p];return void 0!==t?!!t:c(e)},w=!h||!j;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,o,n,a,c,r=i(this),s=u(r,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(c=-1===t?r:arguments[t],V(c)){if(a=l(c.length),f+a>m)throw TypeError(O);for(o=0;o<a;o++,f++)o in c&&d(s,f,c[o])}else{if(f>=m)throw TypeError(O);d(s,f++,c)}return s.length=f,s}})},a999:function(e,t,o){"use strict";var n=o("b775");function a(e){return n["a"].post("/newAddChatRoom",e)}function c(e){return n["a"].post("/newDeleteRoom/"+e)}function r(e){return n["a"].post("/newModifyChatRoom",e)}function i(e){return n["a"].get("/viewMyRoom/"+e)}function l(e){return n["a"].post("/newGetSubRoom/"+e)}function d(){return n["a"].get("/newViewAllLocation")}function u(e){return n["a"].get("/getShopperField/"+e)}function s(e){return n["a"].post("/userCount/"+e)}t["a"]={addChatRoom:a,deleteChatRoom:c,updateChatRoom:r,search:i,getLocation:u,getAllLocation:d,getSubRoom:l,getUserCount:s}},c24f:function(e,t,o){"use strict";var n=o("b775");function a(e){return n["a"].post("/newLogin",e)}function c(){return n["a"].post("/user/logout")}function r(e){return n["a"].post("/user/register",e)}t["a"]={login:a,logout:c,register:r}},caf5:function(e,t,o){},cb06:function(e,t,o){"use strict";o("caf5")},ea4b:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a=Object(n["withScopeId"])("data-v-4a03cec3");Object(n["pushScopeId"])("data-v-4a03cec3");var c={class:"crumbs"},r=Object(n["createVNode"])("i",{class:"el-icon-lx-warn"},null,-1),i=Object(n["createTextVNode"])(" 权限测试 "),l={class:"container"},d=Object(n["createVNode"])("h1",null,"管理员权限页面",-1),u=Object(n["createVNode"])("p",null,"只有用 admin 账号登录的才拥有管理员权限，才能进到这个页面，其他账号想进来都会跳到403页面，重新用管理员账号登录才有权限。",-1),s=Object(n["createTextVNode"])(" 想尝试一下，请 "),f=Object(n["createTextVNode"])("退出登录"),b=Object(n["createTextVNode"])("，换个账号，再进来试试看。 "),p=Object(n["createTextVNode"])("区域分配"),m=Object(n["createTextVNode"])("删除"),O=Object(n["createTextVNode"])("新增区域");Object(n["popScopeId"])();var h=a((function(e,t,o,h,j,V){var w=Object(n["resolveComponent"])("el-breadcrumb-item"),v=Object(n["resolveComponent"])("el-breadcrumb"),g=Object(n["resolveComponent"])("router-link"),N=Object(n["resolveComponent"])("el-table-column"),C=Object(n["resolveComponent"])("el-button"),x=Object(n["resolveComponent"])("el-table"),k=Object(n["resolveComponent"])("el-option"),y=Object(n["resolveComponent"])("el-select"),_=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])("div",c,[Object(n["createVNode"])(v,{separator:"/"},{default:a((function(){return[Object(n["createVNode"])(w,null,{default:a((function(){return[r,i]})),_:1})]})),_:1})]),Object(n["createVNode"])("div",l,[d,u,Object(n["createVNode"])("p",null,[s,Object(n["createVNode"])(g,{to:"/login",class:"logout"},{default:a((function(){return[f]})),_:1}),b])]),Object(n["createVNode"])(x,{data:j.tableData,stripe:"",style:{width:"100%"}},{default:a((function(){return[Object(n["createVNode"])(N,{prop:"name",label:"管理员姓名"}),Object(n["createVNode"])(N,{prop:"password",label:"管理员密码"}),Object(n["createVNode"])(N,{prop:"accessfield",label:"区域权限"}),Object(n["createVNode"])(N,{prop:"email",label:"管理员邮箱"}),Object(n["createVNode"])(N,{prop:"operation",label:""},{default:a((function(e){return[Object(n["createVNode"])(C,{onClick:function(t){return V.handleEdit(e.$index,e.row)},type:"text",size:"small"},{default:a((function(){return[p]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(n["createVNode"])(_,{title:"添加权限范围",modelValue:j.editVisible,"onUpdate:modelValue":t[2]||(t[2]=function(e){return j.editVisible=e}),width:"30%"},{default:a((function(){return[Object(n["createVNode"])(x,{data:j.form.locations,style:{width:"100%"}},{default:a((function(){return[Object(n["createVNode"])(N,{prop:"field",label:"区域ID"}),Object(n["createVNode"])(N,{prop:"location",label:"区域名称"}),Object(n["createVNode"])(N,{prop:"operation",label:""},{default:a((function(e){return[Object(n["createVNode"])(C,{onClick:function(t){return V.deleteField(e.$index,e.row)},type:"text",size:"small"},{default:a((function(){return[m]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(n["createVNode"])(y,{modelValue:j.form.location,"onUpdate:modelValue":t[1]||(t[1]=function(e){return j.form.location=e}),"value-key":"field",placeholder:"请选择聊天室区域",style:{width:"80%"}},{default:a((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(j.locations,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:e.field,value:e,label:e.location},null,8,["value","label"])})),128))]})),_:1},8,["modelValue"]),Object(n["createVNode"])(C,{onClick:V.addField,type:"text",size:"small"},{default:a((function(){return[O]})),_:1},8,["onClick"])]})),_:1},8,["modelValue"])])})),j=(o("99af"),o("b775"));o("c24f");function V(){return j["a"].get("/shopperList")}function w(e){return j["a"].post("/addShopperField",e)}function v(e,t){return j["a"].post("/removeShopperField/".concat(e,"/").concat(t))}var g={getUser:V,addField:w,deleteField:v},N=o("a999"),C={name:"permission",data:function(){return{tableData:[{name:"www",password:"11111111",accessId:"1",email:"2222@qq.com"},{name:"admin1",password:"123456",accessId:"1,2",email:"admin@qq.com"},{name:"wxbcs",password:"wxbcs",accessId:"2",email:"111@qq.com"}],form:{id:0,locations:[],location:{}},locations:[],editVisible:!1}},created:function(){this.getData()},methods:{getData:function(){var e=this;g.getUser().then((function(t){2e4===t.code?e.tableData=t.data.shopperList:window.alert("网络异常！")})),N["a"].getAllLocation().then((function(t){2e4===t.code?e.locations=t.data.locationToFieldList:window.alert("server error!")}))},handleEdit:function(e,t){var o=this;console.log(t),this.idx=e,this.form.id=t.id,this.form.locations=t.locations,N["a"].getLocation(t.id).then((function(e){2e4===e.code&&(o.form.locations=e.data.shopperList)})),this.editVisible=!0},deleteField:function(e,t){var o=this;g.deleteField(t.managerId,parseInt(t.field)).then((function(e){2e4===e.code&&o.$message.success("删除成功")}))},addField:function(){var e=this;if(console.log(this.form.location),null===this.form.location||"{}"==JSON.stringify(this.form.location))window.alert("请先选择区域");else{var t={field:this.form.location.field,location:this.form.location.location,managerId:this.form.id};g.addField(t).then((function(t){2e4===t.code?(e.$message.success("提交成功！"),e.form.location=null):e.$message.error("提交失败！")}))}}}};o("cb06");C.render=h,C.__scopeId="data-v-4a03cec3";t["default"]=C}}]);
//# sourceMappingURL=permission.375124a2.js.map