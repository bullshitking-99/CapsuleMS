{"remainingRequest":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\src\\views\\chatroom\\AddChatRoom.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\src\\views\\chatroom\\AddChatRoom.vue","mtime":1649401825000},{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649401825000},{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\babel-loader\\lib\\index.js","mtime":1649401825000},{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649401825000},{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1649401825000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwudG8tanNvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgaHR0cCBmcm9tICJAL2FwaS9jaGF0cm9vbSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkQ2hhdFJvb20iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgc190aW1lOiAiIiwKICAgICAgICBlX3RpbWU6ICIiLAogICAgICAgIGxvY2F0aW9uOiBbXSwKICAgICAgICBSRVNFUlZFOiAwCiAgICAgIH0sCiAgICAgIGxvY2F0aW9uTGlzdDogW3sKICAgICAgICBsb2NhdGlvbjogIuWNjuWggiIsCiAgICAgICAgZmllbGQ6ICIxIgogICAgICB9LCB7CiAgICAgICAgbG9jYXRpb246ICLlkIjnlJ/msYciLAogICAgICAgIGZpZWxkOiAiMiIKICAgICAgfSwgewogICAgICAgIGxvY2F0aW9uOiAi5Lit6JOdIiwKICAgICAgICBmaWVsZDogIjMiCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9jYXRpb25MaXN0ID0gW107CiAgICB0aGlzLmdldExvY2F0aW9uKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24gZ2V0TG9jYXRpb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdXNlciA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXI7CiAgICAgIHZhciB1c2VySWQgPSB1c2VyLmlkOwoKICAgICAgaWYgKHVzZXIuYWNjZXNzZmllbGQgPT09ICIwIikgewogICAgICAgIGh0dHAuZ2V0QWxsTG9jYXRpb24oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwMDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEubG9jYXRpb25Ub0ZpZWxkTGlzdCk7CiAgICAgICAgICAgIF90aGlzLmxvY2F0aW9uTGlzdCA9IHJlcy5kYXRhLmxvY2F0aW9uVG9GaWVsZExpc3Q7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaHR0cC5nZXRMb2NhdGlvbih1c2VySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDAwMCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5zaG9wcGVyTGlzdCk7CiAgICAgICAgICAgIF90aGlzLmxvY2F0aW9uTGlzdCA9IHJlcy5kYXRhLnNob3BwZXJMaXN0OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB1c2VyID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlcjsKICAgICAgdmFyIHVzZXJJZCA9IHVzZXIuaWQ7CiAgICAgIHZhciBsb2NhdGlvbiA9ICIiOwogICAgICB2YXIgZmllbGQgPSAiIjsKICAgICAgdmFyIGxvY2F0aW9ucyA9IHRoaXMuZm9ybS5sb2NhdGlvbjsKICAgICAgbG9jYXRpb25zLmZvckVhY2gobXlGdW5jdGlvbik7CgogICAgICBmdW5jdGlvbiBteUZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsKICAgICAgICBsb2NhdGlvbiA9IGxvY2F0aW9uICsgIiwiICsgdmFsdWUubG9jYXRpb247CiAgICAgICAgZmllbGQgPSBmaWVsZCArICIsIiArIHZhbHVlLmZpZWxkOwogICAgICB9CgogICAgICBpZiAoZmllbGQubGVuZ3RoID4gMCkgewogICAgICAgIGxvY2F0aW9uID0gbG9jYXRpb24uc2xpY2UoMSk7IC8v5Y676Zmk5byA5aS055qE5byV5Y+3CgogICAgICAgIGZpZWxkID0gZmllbGQuc2xpY2UoMSk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKGZpZWxkKTsKICAgICAgY29uc29sZS5sb2cobG9jYXRpb24pOwogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIG5hbWU6IHRoaXMuZm9ybS5uYW1lLAogICAgICAgIGZpZWxkOiBmaWVsZCwKICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sCiAgICAgICAgc190aW1lOiB0aGlzLmNoYW5nZVRpbWVTdHlsZSh0aGlzLmZvcm0uc190aW1lKSwKICAgICAgICBlX3RpbWU6IHRoaXMuY2hhbmdlVGltZVN0eWxlKHRoaXMuZm9ybS5lX3RpbWUpLAogICAgICAgIFJFU0VSVkU6IDAsCiAgICAgICAgY3JlYXRvcjogdXNlcklkCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7CiAgICAgIGh0dHAuYWRkQ2hhdFJvb20ocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMDAwKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygi5o+Q5Lqk5oiQ5Yqf77yBIik7CgogICAgICAgICAgX3RoaXMyLm9uUmVzZXQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKCLmj5DkuqTlpLHotKXvvIEiKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm0ubG9jYXRpb24pCiAgICB9LAogICAgb25SZXNldDogZnVuY3Rpb24gb25SZXNldCgpIHsKICAgICAgdGhpcy5mb3JtID0gW107CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybSk7CiAgICB9LAogICAgY2hhbmdlVGltZVN0eWxlOiBmdW5jdGlvbiBjaGFuZ2VUaW1lU3R5bGUob2xkVGltZSkgewogICAgICAvLyDml7bpl7TovazmjaIKICAgICAgdmFyIGRhdGVqc29uID0gbmV3IERhdGUob2xkVGltZSkudG9KU09OKCk7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoK25ldyBEYXRlKGRhdGVqc29uKSArIDggKiAzNjAwICogMTAwMCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9UL2csICIgIikucmVwbGFjZSgvXC5bXGRdezN9Wi8sICIiKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\src\\views\\chatroom\\AddChatRoom.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"crumbs\">\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item>\n          <i class=\"el-icon-lx-calendar\"></i> 聊天室管理\n        </el-breadcrumb-item>\n        <el-breadcrumb-item>添加聊天室</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n    <div class=\"container\">\n      <div class=\"form-box\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\n          <el-form-item label=\"聊天室名称\">\n            <el-input\n              v-model=\"form.name\"\n              placeholder=\"请输入聊天室名称\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"聊天室区域\" prop=\"location\">\n            <el-select\n              v-model=\"form.location\"\n              value-key=\"field\"\n              multiple\n              placeholder=\"请选择聊天室区域\"\n              style=\"width: 100%\"\n            >\n              <el-option\n                v-for=\"item in locationList\"\n                :key=\"item.field\"\n                :value=\"item\"\n                :label=\"item.location\"\n              >\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <!--                    <el-form-item label=\"聊天室位置\">-->\n          <!--                        <el-input v-model=\"form.location\" placeholder=\"请输入聊天室位置\"></el-input>-->\n          <!--                    </el-form-item>-->\n          <!--                    <el-form-item label=\"取号功能\">-->\n          <!--                        <el-select v-model=\"form.number\" placeholder=\"选择取号功能\">-->\n          <!--                            <el-option key=\"1\" label=\"按桌型叫号\" value=\"按桌型叫号\"></el-option>-->\n          <!--                            <el-option key=\"2\" label=\"标准\" value=\"标准\"></el-option>-->\n          <!--                            <el-option key=\"3\" label=\"否\" value=\"否\"></el-option>-->\n          <!--                        </el-select>-->\n          <!--                    </el-form-item>-->\n\n          <el-form-item label=\"选择开始时间\">\n            <el-date-picker\n              v-model=\"form.s_time\"\n              type=\"datetime\"\n              placeholder=\"选择开始时间\"\n              style=\"width: 100%\"\n            >\n            </el-date-picker>\n          </el-form-item>\n\n          <el-form-item label=\"选择截至时间\">\n            <el-date-picker\n              v-model=\"form.e_time\"\n              type=\"datetime\"\n              placeholder=\"选择结束时间\"\n              style=\"width: 100%\"\n            >\n            </el-date-picker>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"onSubmit\">提交</el-button>\n            <el-button style=\"margin-left: 300px\" @click=\"onReset\"\n              >重置</el-button\n            >\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport http from \"@/api/chatroom\";\nexport default {\n  name: \"addChatRoom\",\n  data() {\n    return {\n      form: {\n        name: \"\",\n        s_time: \"\",\n        e_time: \"\",\n        location: [],\n        RESERVE: 0,\n      },\n      locationList: [\n        {\n          location: \"华堂\",\n          field: \"1\",\n        },\n        {\n          location: \"合生汇\",\n          field: \"2\",\n        },\n        {\n          location: \"中蓝\",\n          field: \"3\",\n        },\n      ],\n    };\n  },\n  created() {\n    this.locationList = [];\n    this.getLocation();\n  },\n  methods: {\n    getLocation() {\n      let user = this.$store.state.user;\n      let userId = user.id;\n      if (user.accessfield === \"0\") {\n        http.getAllLocation().then((res) => {\n          if (res.code === 20000) {\n            console.log(res.data.locationToFieldList);\n            this.locationList = res.data.locationToFieldList;\n          }\n        });\n      } else {\n        http.getLocation(userId).then((res) => {\n          if (res.code === 20000) {\n            console.log(res.data.shopperList);\n            this.locationList = res.data.shopperList;\n          }\n        });\n      }\n    },\n    onSubmit() {\n      let user = this.$store.state.user;\n      let userId = user.id;\n      let location = \"\";\n      let field = \"\";\n      let locations = this.form.location;\n      locations.forEach(myFunction);\n      function myFunction(value, index, array) {\n        location = location + \",\" + value.location;\n        field = field + \",\" + value.field;\n      }\n\n      if (field.length > 0) {\n        location = location.slice(1); //去除开头的引号\n        field = field.slice(1);\n      }\n      console.log(field);\n      console.log(location);\n      let params = {\n        name: this.form.name,\n        field: field,\n        location: location,\n        s_time: this.changeTimeStyle(this.form.s_time),\n        e_time: this.changeTimeStyle(this.form.e_time),\n        RESERVE: 0,\n        creator: userId,\n      };\n      console.log(params);\n      http.addChatRoom(params).then((res) => {\n        if (res.code === 20000) {\n          this.$message.success(\"提交成功！\");\n          this.onReset();\n        } else {\n          this.$message.error(\"提交失败！\");\n        }\n      });\n      // console.log(this.form.location)\n    },\n    onReset() {\n      this.form = [];\n      console.log(this.form);\n    },\n    changeTimeStyle(oldTime) {\n      // 时间转换\n      let datejson = new Date(oldTime).toJSON();\n      let date = new Date(+new Date(datejson) + 8 * 3600 * 1000)\n        .toISOString()\n        .replace(/T/g, \" \")\n        .replace(/\\.[\\d]{3}Z/, \"\");\n      return date;\n    },\n  },\n};\n</script>\n"],"sourceRoot":""}]}