{"remainingRequest":"F:\\Ideaproject\\workspace\\vue-manage-system\\node_modules\\babel-loader\\lib\\index.js!F:\\Ideaproject\\workspace\\vue-manage-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\Ideaproject\\workspace\\vue-manage-system\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\Ideaproject\\workspace\\vue-manage-system\\src\\views\\chatroom\\AddChatRoom.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\Ideaproject\\workspace\\vue-manage-system\\src\\views\\chatroom\\AddChatRoom.vue","mtime":1633768353285},{"path":"F:\\Ideaproject\\workspace\\vue-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Ideaproject\\workspace\\vue-manage-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Ideaproject\\workspace\\vue-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Ideaproject\\workspace\\vue-manage-system\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwudG8tanNvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgaHR0cCBmcm9tICdAL2FwaS9jaGF0cm9vbSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnYWRkQ2hhdFJvb20nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgc190aW1lOiAiIiwKICAgICAgICBlX3RpbWU6ICIiLAogICAgICAgIGxvY2F0aW9uOiBbXSwKICAgICAgICBSRVNFUlZFOiAwCiAgICAgIH0sCiAgICAgIGxvY2F0aW9uTGlzdDogW3sKICAgICAgICBsb2NhdGlvbjogIuWNjuWggiIsCiAgICAgICAgZmllbGQ6ICIxIgogICAgICB9LCB7CiAgICAgICAgbG9jYXRpb246ICLlkIjnlJ/msYciLAogICAgICAgIGZpZWxkOiAiMiIKICAgICAgfSwgewogICAgICAgIGxvY2F0aW9uOiAi5Lit6JOdIiwKICAgICAgICBmaWVsZDogIjMiCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9jYXRpb25MaXN0ID0gW107CiAgICB0aGlzLmdldExvY2F0aW9uKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24gZ2V0TG9jYXRpb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdXNlciA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXI7CiAgICAgIHZhciB1c2VySWQgPSB1c2VyLmlkOwoKICAgICAgaWYgKHVzZXIuYWNjZXNzZmllbGQgPT09ICIwIikgewogICAgICAgIGh0dHAuZ2V0QWxsTG9jYXRpb24oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwMDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEubG9jYXRpb25Ub0ZpZWxkTGlzdCk7CiAgICAgICAgICAgIF90aGlzLmxvY2F0aW9uTGlzdCA9IHJlcy5kYXRhLmxvY2F0aW9uVG9GaWVsZExpc3Q7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaHR0cC5nZXRMb2NhdGlvbih1c2VySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDAwMCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5zaG9wcGVyTGlzdCk7CiAgICAgICAgICAgIF90aGlzLmxvY2F0aW9uTGlzdCA9IHJlcy5kYXRhLnNob3BwZXJMaXN0OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB1c2VyID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlcjsKICAgICAgdmFyIHVzZXJJZCA9IHVzZXIuaWQ7CiAgICAgIHZhciBsb2NhdGlvbiA9ICIiOwogICAgICB2YXIgZmllbGQgPSAiIjsKICAgICAgdmFyIGxvY2F0aW9ucyA9IHRoaXMuZm9ybS5sb2NhdGlvbjsKICAgICAgbG9jYXRpb25zLmZvckVhY2gobXlGdW5jdGlvbik7CgogICAgICBmdW5jdGlvbiBteUZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsKICAgICAgICBsb2NhdGlvbiA9IGxvY2F0aW9uICsgIiwiICsgdmFsdWUubG9jYXRpb247CiAgICAgICAgZmllbGQgPSBmaWVsZCArICIsIiArIHZhbHVlLmZpZWxkOwogICAgICB9CgogICAgICBpZiAoZmllbGQubGVuZ3RoID4gMCkgewogICAgICAgIGxvY2F0aW9uID0gbG9jYXRpb24uc2xpY2UoMSk7IC8v5Y676Zmk5byA5aS055qE5byV5Y+3CgogICAgICAgIGZpZWxkID0gZmllbGQuc2xpY2UoMSk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKGZpZWxkKTsKICAgICAgY29uc29sZS5sb2cobG9jYXRpb24pOwogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIG5hbWU6IHRoaXMuZm9ybS5uYW1lLAogICAgICAgIGZpZWxkOiBmaWVsZCwKICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sCiAgICAgICAgc190aW1lOiB0aGlzLmNoYW5nZVRpbWVTdHlsZSh0aGlzLmZvcm0uc190aW1lKSwKICAgICAgICBlX3RpbWU6IHRoaXMuY2hhbmdlVGltZVN0eWxlKHRoaXMuZm9ybS5lX3RpbWUpLAogICAgICAgIFJFU0VSVkU6IDAsCiAgICAgICAgY3JlYXRvcjogdXNlcklkCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7CiAgICAgIGh0dHAuYWRkQ2hhdFJvb20ocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMDAwKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygn5o+Q5Lqk5oiQ5Yqf77yBJyk7CgogICAgICAgICAgX3RoaXMyLm9uUmVzZXQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKCfmj5DkuqTlpLHotKXvvIEnKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm0ubG9jYXRpb24pCiAgICB9LAogICAgb25SZXNldDogZnVuY3Rpb24gb25SZXNldCgpIHsKICAgICAgdGhpcy5mb3JtID0gW107CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybSk7CiAgICB9LAogICAgY2hhbmdlVGltZVN0eWxlOiBmdW5jdGlvbiBjaGFuZ2VUaW1lU3R5bGUob2xkVGltZSkgewogICAgICAvLyDml7bpl7TovazmjaIKICAgICAgdmFyIGRhdGVqc29uID0gbmV3IERhdGUob2xkVGltZSkudG9KU09OKCk7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoK25ldyBEYXRlKGRhdGVqc29uKSArIDggKiAzNjAwICogMTAwMCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9UL2csICcgJykucmVwbGFjZSgvXC5bXGRdezN9Wi8sICcnKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:\\Ideaproject\\workspace\\vue-manage-system\\src\\views\\chatroom\\AddChatRoom.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item>\r\n                    <i class=\"el-icon-lx-calendar\"></i> 聊天室管理\r\n                </el-breadcrumb-item>\r\n                <el-breadcrumb-item>添加聊天室</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"form-box\">\r\n                <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\r\n                    <el-form-item label=\"聊天室名称\">\r\n                        <el-input v-model=\"form.name\" placeholder=\"请输入聊天室名称\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"聊天室区域\" prop=\"location\">\r\n                        <el-select v-model=\"form.location\" value-key=\"field\" multiple placeholder=\"请选择聊天室区域\" style=\"width: 100%\">\r\n                            <el-option\r\n                                v-for=\"item in locationList\"\r\n                                :key=\"item.field\"\r\n                                :value=\"item\"\r\n                                :label=\"item.location\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n<!--                    <el-form-item label=\"聊天室位置\">-->\r\n<!--                        <el-input v-model=\"form.location\" placeholder=\"请输入聊天室位置\"></el-input>-->\r\n<!--                    </el-form-item>-->\r\n<!--                    <el-form-item label=\"取号功能\">-->\r\n<!--                        <el-select v-model=\"form.number\" placeholder=\"选择取号功能\">-->\r\n<!--                            <el-option key=\"1\" label=\"按桌型叫号\" value=\"按桌型叫号\"></el-option>-->\r\n<!--                            <el-option key=\"2\" label=\"标准\" value=\"标准\"></el-option>-->\r\n<!--                            <el-option key=\"3\" label=\"否\" value=\"否\"></el-option>-->\r\n<!--                        </el-select>-->\r\n<!--                    </el-form-item>-->\r\n\r\n\r\n                    <el-form-item label=\"选择开始时间\">\r\n                        <el-date-picker\r\n                            v-model=\"form.s_time\"\r\n                            type=\"datetime\"\r\n                            placeholder=\"选择开始时间\"\r\n                            style=\"width: 100%\">\r\n                        </el-date-picker>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"选择截至时间\">\r\n                        <el-date-picker\r\n                            v-model=\"form.e_time\"\r\n                            type=\"datetime\"\r\n                            placeholder=\"选择结束时间\"\r\n                            style=\"width: 100%\">\r\n                        </el-date-picker>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item>\r\n                        <el-button type=\"primary\" @click=\"onSubmit\">提交</el-button>\r\n                        <el-button style=\"margin-left: 300px\" @click=\"onReset\">重置</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport http from '@/api/chatroom'\r\nexport default {\r\n    name: 'addChatRoom',\r\n    data() {\r\n        return {\r\n            form: {\r\n                name: \"\",\r\n                s_time: \"\",\r\n                e_time: \"\",\r\n                location: [],\r\n                RESERVE: 0\r\n            },\r\n            locationList: [\r\n                {\r\n                    location: \"华堂\",\r\n                    field: \"1\"\r\n                },{\r\n                    location: \"合生汇\",\r\n                    field: \"2\"\r\n                },{\r\n                    location: \"中蓝\",\r\n                    field: \"3\"\r\n                }\r\n            ]\r\n        };\r\n    },\r\n    created() {\r\n        this.locationList = []\r\n        this.getLocation();\r\n\r\n    },\r\n    methods: {\r\n        getLocation(){\r\n            let user = this.$store.state.user\r\n            let userId = user.id\r\n            if(user.accessfield === \"0\"){\r\n\r\n                http.getAllLocation().then(res => {\r\n                    if(res.code === 20000){\r\n                        console.log(res.data.locationToFieldList)\r\n                        this.locationList = res.data.locationToFieldList\r\n                    }\r\n                })\r\n            }else {\r\n                http.getLocation(userId).then(res => {\r\n                    if(res.code === 20000){\r\n                        console.log(res.data.shopperList)\r\n                        this.locationList = res.data.shopperList\r\n                    }\r\n                })\r\n            }\r\n\r\n        },\r\n        onSubmit() {\r\n            let user = this.$store.state.user\r\n            let userId = user.id\r\n            let location = \"\"\r\n            let field = \"\"\r\n            let locations = this.form.location\r\n            locations.forEach(myFunction)\r\n            function myFunction(value, index, array){\r\n                location = location + \",\" + value.location\r\n                field = field + \",\" + value.field\r\n            }\r\n\r\n            if(field.length > 0){\r\n                location = location.slice(1) //去除开头的引号\r\n                field = field.slice(1)\r\n            }\r\n            console.log(field)\r\n            console.log(location)\r\n            let params = {\r\n                name: this.form.name,\r\n                field: field,\r\n                location: location,\r\n                s_time: this.changeTimeStyle(this.form.s_time),\r\n                e_time: this.changeTimeStyle(this.form.e_time),\r\n                RESERVE: 0,\r\n                creator: userId\r\n            }\r\n            console.log(params)\r\n            http.addChatRoom(params).then(res => {\r\n                if(res.code === 20000){\r\n                    this.$message.success('提交成功！')\r\n                    this.onReset()\r\n                }else {\r\n                    this.$message.error('提交失败！')\r\n                }\r\n            })\r\n            // console.log(this.form.location)\r\n        },\r\n        onReset() {\r\n            this.form = [];\r\n            console.log(this.form)\r\n        },\r\n        changeTimeStyle(oldTime) {\r\n            // 时间转换\r\n            let datejson = new Date(oldTime).toJSON();\r\n            let date = new Date( + new Date(datejson)\r\n                + 8*3600*1000).toISOString().\r\n            replace(/T/g,' ').\r\n            replace(/\\.[\\d]{3}Z/,'')\r\n            return date;\r\n        },\r\n    }\r\n};\r\n</script>\r\n"],"sourceRoot":""}]}