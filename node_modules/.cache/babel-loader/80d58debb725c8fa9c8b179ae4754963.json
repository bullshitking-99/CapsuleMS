{"remainingRequest":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\src\\views\\Permission.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\src\\views\\Permission.vue","mtime":1634045080000},{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634045080000},{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\babel-loader\\lib\\index.js","mtime":1634045080000},{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634045080000},{"path":"C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1634045080000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGh0dHAgZnJvbSAnQC9hcGkvYWRtaW4nOwppbXBvcnQgaHR0cFJvb20gZnJvbSAnQC9hcGkvY2hhdHJvb20nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInBlcm1pc3Npb24iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IFt7CiAgICAgICAgbmFtZTogInd3dyIsCiAgICAgICAgcGFzc3dvcmQ6ICIxMTExMTExMSIsCiAgICAgICAgYWNjZXNzSWQ6ICIxIiwKICAgICAgICBlbWFpbDogIjIyMjJAcXEuY29tIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogImFkbWluMSIsCiAgICAgICAgcGFzc3dvcmQ6ICIxMjM0NTYiLAogICAgICAgIGFjY2Vzc0lkOiAiMSwyIiwKICAgICAgICBlbWFpbDogImFkbWluQHFxLmNvbSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJ3eGJjcyIsCiAgICAgICAgcGFzc3dvcmQ6ICJ3eGJjcyIsCiAgICAgICAgYWNjZXNzSWQ6ICIyIiwKICAgICAgICBlbWFpbDogIjExMUBxcS5jb20iCiAgICAgIH1dLAogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6IDAsCiAgICAgICAgLy/or6XllYbmiLdpZAogICAgICAgIGxvY2F0aW9uczogW10sCiAgICAgICAgLy8g6K+l5ZWG5oi35bey5pyJ5p2D6ZmQ55qE5Yy65Z+fCiAgICAgICAgbG9jYXRpb246IHt9IC8vIOaaguaXtuiusOW9lemAieaLqeeahOWMuuWfn++8jOWNs+WwhuaWsOWingoKICAgICAgfSwKICAgICAgbG9jYXRpb25zOiBbXSwKICAgICAgLy/orrDlvZXmiYDmnInljLrln58KICAgICAgZWRpdFZpc2libGU6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0RGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGh0dHAuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwMDApIHsKICAgICAgICAgIF90aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnNob3BwZXJMaXN0OyAvLyAiaWQiOiA3LAogICAgICAgICAgLy8gIm5hbWUiOiAiZGFkYWRhIiwKICAgICAgICAgIC8vICJwYXNzd29yZCI6ICIxMTExMTEiLAogICAgICAgICAgLy8gImRlc2NyaXB0aW9uIjogbnVsbCwKICAgICAgICAgIC8vICJlbWFpbCI6ICIxMTExMTExMUAxMTEuY29tIiwKICAgICAgICAgIC8vICJhY2Nlc3NmaWVsZCI6ICIxIgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aW5kb3cuYWxlcnQoIue9kee7nOW8guW4uO+8gSIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGh0dHBSb29tLmdldEFsbExvY2F0aW9uKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDAwMCkgewogICAgICAgICAgX3RoaXMubG9jYXRpb25zID0gcmVzLmRhdGEubG9jYXRpb25Ub0ZpZWxkTGlzdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2luZG93LmFsZXJ0KCJzZXJ2ZXIgZXJyb3IhIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDngrnlh7vigJzljLrln5/liIbphY3igJ3mjInpkq4KICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIGNvbnNvbGUubG9nKCJpbmRleDoiICsgaW5kZXgpCiAgICAgIGNvbnNvbGUubG9nKHJvdyk7CiAgICAgIHRoaXMuaWR4ID0gaW5kZXg7CiAgICAgIHRoaXMuZm9ybS5pZCA9IHJvdy5pZDsKICAgICAgdGhpcy5mb3JtLmxvY2F0aW9ucyA9IHJvdy5sb2NhdGlvbnM7CiAgICAgIGh0dHBSb29tLmdldExvY2F0aW9uKHJvdy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDAwMCkgewogICAgICAgICAgX3RoaXMyLmZvcm0ubG9jYXRpb25zID0gcmVzLmRhdGEuc2hvcHBlckxpc3Q7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5lZGl0VmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy8gc2F2ZUVkaXQoKXsKICAgIC8vICAgICB0aGlzLmVkaXRWaXNpYmxlID0gZmFsc2U7CiAgICAvLyB9LAogICAgZGVsZXRlRmllbGQ6IGZ1bmN0aW9uIGRlbGV0ZUZpZWxkKGluZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm0ubG9jYXRpb25zKQogICAgICAvLyBjb25zb2xlLmxvZyhyb3cpCiAgICAgIGh0dHAuZGVsZXRlRmllbGQocm93Lm1hbmFnZXJJZCwgcGFyc2VJbnQocm93LmZpZWxkKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDAwMCkgewogICAgICAgICAgX3RoaXMzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g54K55Ye75paw5aKeCiAgICBhZGRGaWVsZDogZnVuY3Rpb24gYWRkRmllbGQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtLmxvY2F0aW9uKTsKCiAgICAgIGlmICh0aGlzLmZvcm0ubG9jYXRpb24gPT09IG51bGwgfHwgSlNPTi5zdHJpbmdpZnkodGhpcy5mb3JtLmxvY2F0aW9uKSA9PSAie30iKSB7CiAgICAgICAgd2luZG93LmFsZXJ0KCLor7flhYjpgInmi6nljLrln58iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcGFyYW0gPSB7CiAgICAgICAgICBmaWVsZDogdGhpcy5mb3JtLmxvY2F0aW9uLmZpZWxkLAogICAgICAgICAgbG9jYXRpb246IHRoaXMuZm9ybS5sb2NhdGlvbi5sb2NhdGlvbiwKICAgICAgICAgIG1hbmFnZXJJZDogdGhpcy5mb3JtLmlkCiAgICAgICAgfTsKICAgICAgICBodHRwLmFkZEZpZWxkKHBhcmFtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwMDApIHsKICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlLnN1Y2Nlc3MoJ+aPkOS6pOaIkOWKn++8gScpOwoKICAgICAgICAgICAgX3RoaXM0LmZvcm0ubG9jYXRpb24gPSBudWxsOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlLmVycm9yKCfmj5DkuqTlpLHotKXvvIEnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["C:\\Users\\86155\\.vscode\\WEBcode\\CapsuleMS\\src\\views\\Permission.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item>\n                    <i class=\"el-icon-lx-warn\"></i> 权限测试\n                </el-breadcrumb-item>\n            </el-breadcrumb>\n        </div>\n        <div class=\"container\">\n            <h1>管理员权限页面</h1>\n            <p>只有用 admin 账号登录的才拥有管理员权限，才能进到这个页面，其他账号想进来都会跳到403页面，重新用管理员账号登录才有权限。</p>\n            <p>\n                想尝试一下，请\n                <router-link to=\"/login\" class=\"logout\">退出登录</router-link>，换个账号，再进来试试看。\n            </p>\n        </div>\n        <el-table\n            :data=\"tableData\"\n            stripe\n            style=\"width: 100%\">\n            <el-table-column prop=\"name\" label=\"管理员姓名\"></el-table-column>\n            <el-table-column prop=\"password\" label=\"管理员密码\"></el-table-column>\n            <el-table-column prop=\"accessfield\" label=\"区域权限\"></el-table-column>\n            <el-table-column prop=\"email\" label=\"管理员邮箱\"></el-table-column>\n            <el-table-column prop=\"operation\" label=\"\">\n                <template #default=\"scope\">\n                    <el-button @click=\"handleEdit(scope.$index, scope.row)\" type=\"text\" size=\"small\">区域分配</el-button>\n                </template>\n            </el-table-column>\n\n\n        </el-table>\n\n        <!-- 编辑弹出框 -->\n        <el-dialog title=\"添加权限范围\" v-model=\"editVisible\" width=\"30%\">\n            <el-table\n                :data=\"form.locations\"\n                style=\"width: 100%\">\n                <el-table-column prop=\"field\" label=\"区域ID\"></el-table-column>\n                <el-table-column prop=\"location\" label=\"区域名称\"></el-table-column>\n                <el-table-column prop=\"operation\" label=\"\">\n                    <template #default=\"scope\">\n                        <el-button @click=\"deleteField(scope.$index, scope.row)\" type=\"text\" size=\"small\">删除</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n<!--            <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">-->\n<!--                <el-form-item label=\"选择区域\" prop=\"location\">-->\n                    <el-select v-model=\"form.location\" value-key=\"field\" placeholder=\"请选择聊天室区域\" style=\"width: 80%\">\n                        <el-option\n                            v-for=\"item in locations\"\n                            :key=\"item.field\"\n                            :value=\"item\"\n                            :label=\"item.location\">\n                        </el-option>\n                    </el-select>\n                    <el-button @click=\"addField\" type=\"text\" size=\"small\">新增区域</el-button>\n<!--                </el-form-item>-->\n<!--            </el-form>-->\n\n<!--确定和取消 -->\n<!--            <template #footer>-->\n<!--                <span class=\"dialog-footer\">-->\n<!--                    <el-button @click=\"editVisible = false\">取 消</el-button>-->\n<!--                    <el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>-->\n<!--                </span>-->\n<!--            </template>-->\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport http from '@/api/admin'\nimport httpRoom from '@/api/chatroom'\nexport default {\n    name: \"permission\",\n    data() {\n        return {\n            tableData: [\n                {\n                    name: \"www\",\n                    password: \"11111111\",\n                    accessId: \"1\",\n                    email: \"2222@qq.com\"\n                },\n                {\n                    name: \"admin1\",\n                    password: \"123456\",\n                    accessId: \"1,2\",\n                    email: \"admin@qq.com\"\n                },\n                {\n                    name: \"wxbcs\",\n                    password: \"wxbcs\",\n                    accessId: \"2\",\n                    email: \"111@qq.com\"\n                },\n            ],\n            form: {\n                id: 0,  //该商户id\n                locations: [], // 该商户已有权限的区域\n                location: {}    // 暂时记录选择的区域，即将新增\n            },\n            locations: [],  //记录所有区域\n            editVisible: false,\n        }\n    },\n    created() {\n        this.getData()\n    },\n    methods: {\n        getData(){\n            http.getUser().then(res => {\n                if(res.code === 20000){\n                    this.tableData = res.data.shopperList\n                    // \"id\": 7,\n                    // \"name\": \"dadada\",\n                    // \"password\": \"111111\",\n                    // \"description\": null,\n                    // \"email\": \"11111111@111.com\",\n                    // \"accessfield\": \"1\"\n                }else{\n                    window.alert(\"网络异常！\")\n                }\n            })\n\n            httpRoom.getAllLocation().then(res => {\n                if(res.code === 20000){\n                    this.locations = res.data.locationToFieldList\n                }else{\n                    window.alert(\"server error!\")\n                }\n            })\n        },\n        // 点击“区域分配”按钮\n        handleEdit(index, row) {\n            // console.log(\"index:\" + index)\n            console.log(row)\n            this.idx = index;\n            this.form.id = row.id\n            this.form.locations = row.locations\n            httpRoom.getLocation(row.id).then(res => {\n                if(res.code === 20000){\n                    this.form.locations = res.data.shopperList\n                }\n            })\n\n            this.editVisible = true;\n        },\n        // saveEdit(){\n        //     this.editVisible = false;\n        // },\n        deleteField(index, row){\n            // console.log(this.form.locations)\n            // console.log(row)\n            http.deleteField(row.managerId, parseInt(row.field)).then(res => {\n                if(res.code === 20000){\n                    this.$message.success('删除成功')\n                }\n            })\n        },\n        // 点击新增\n        addField(){\n            console.log(this.form.location)\n            if(this.form.location === null || JSON.stringify(this.form.location) == \"{}\"){\n                window.alert(\"请先选择区域\")\n            }else{\n                let param = {\n                    field: this.form.location.field,\n                    location: this.form.location.location,\n                    managerId: this.form.id\n                }\n                http.addField(param).then(res => {\n                    if(res.code === 20000){\n                        this.$message.success('提交成功！')\n                        this.form.location = null\n                    }else{\n                        this.$message.error('提交失败！')\n                    }\n                })\n            }\n        }\n    }\n};\n</script>\n\n<style scoped>\nh1 {\n    text-align: center;\n    margin: 30px 0;\n}\np {\n    line-height: 30px;\n    margin-bottom: 10px;\n    text-indent: 2em;\n}\n.logout {\n    color: #409eff;\n}\n</style>\n"],"sourceRoot":""}]}